<mood-container wrapperClasses="flex-center flex-column">
  <!-- Start Calendar -->
  <section class="calendar" *ngIf="calendarMonth">
    <!-- Start Calendar Title -->
    <div class="calendar-title-row">
      <i
        class="las la-angle-left"
        (click)="loadMonth(selectedMonthIndex - 1)"
      ></i>

      <h3>{{ calendarMonth.monthName }} {{ calendarMonth.yearNumber }}</h3>

      <i
        class="las la-angle-right"
        (click)="loadMonth(selectedMonthIndex + 1)"
      ></i>
    </div>
    <!-- End Calendar Title -->

    <!-- Start Calendar Days -->
    <div class="calendar-days">
      <div
        class="calendar-day-header-labels"
        *ngFor="let headerLabel of weekdayHeaderLabels"
      >
        <div class="calendar-day-header-label">
          {{ headerLabel }}
        </div>
      </div>

      <div
        class="calendar-day-container"
        *ngFor="let day of calendarMonth.days; let i = index"
        [ngClass]="{
          'not-current-month-calendar-day': day.monthPosition !== 'current',
          selected: i === selectedDayIndex
        }"
        (click)="selectDay(day)"
        pRipple
      >
        <div class="calendar-day">
          {{ day.dayNumber }}
        </div>
      </div>
    </div>
    <!-- End Calendar Days -->
  </section>
  <!-- End Calendar -->

  <h3 class="mt-6">{{ selectedDayObj?.format("MMM DD, YYYY") }}</h3>

  <!-- Start Add Mood Button -->
  <section class="my-4 w-full flex-center">
    <button
      pButton
      type="button"
      label="Log your mood!"
      routerLink="/entry/create/{{ selectedDayObj?.format('MM-DD-YYYY') }}"
      pRipple
    ></button>
  </section>
  <!-- End Add Mood Button -->

  <!-- Start Mood List -->
  <section class="mood-list">
    <ng-container *ngIf="data?.length; else noData">
      <div class="mood-list-bubble" *ngFor="let journalEntry of data">
        <div class="mood-list-bubble-dt">
          {{
            isSelectedDayCurrentDay ? "Today" : selectedDayObj?.format("MMM DD")
          }}
          at {{ journalEntry.entryAt | date : "hh:mm a" }}
        </div>

        <div
          class="mood-list-entry"
          *ngIf="journalEntry.entry"
          [innerHTML]="journalEntry.entry"
        ></div>

        <div class="mood-list-score">
          Feeling: {{ journalEntry.mood }}
          <br />
          Mood Score:

          <div class="mood-score-container">
            <div
              *ngFor="let bubble of [].constructor(10); let i = index"
              class="mood-score"
            >
              <div
                class="mood-score-bubble"
                [ngClass]="{
                  active: i + 1 <= journalEntry.score
                }"
              ></div>
            </div>
          </div>
        </div>
      </div>
    </ng-container>
    <ng-template #noData>
      <div class="no-data">No entries found</div>
    </ng-template>
  </section>
  <!-- End Mood List -->
</mood-container>
